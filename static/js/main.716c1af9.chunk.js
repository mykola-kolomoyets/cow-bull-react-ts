(this["webpackJsonpcow-bull-react-ts"]=this["webpackJsonpcow-bull-react-ts"]||[]).push([[0],{11:function(e,t,n){e.exports={moves:"Moves_moves__M8U9J",movesTitle:"Moves_movesTitle__1CgE6",movesText:"Moves_movesText__3aw6a"}},14:function(e,t,n){e.exports={wrapper:"App_wrapper__2kWx0",container:"App_container__3BOCz"}},17:function(e,t,n){e.exports={restart:"RestartGame_restart__2wT-p"}},18:function(e,t,n){e.exports={gameData:"CowBulls_gameData__3CGSK"}},19:function(e,t,n){e.exports={title:"Header_title__ciRrk"}},3:function(e,t,n){e.exports={history:"History_history__DRrye",title:"History_title__vY5Ga",historyList:"History_historyList__3kN5g",item:"History_item__3pxUU",number:"History_number__2ypzF",data:"History_data__1BNWS"}},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r,s=n(0),a=n(8),c=n(4),i=n.n(c),o=n(15),u=n(9),l=Object(s.createContext)({}),b=n(6),m=function(){return Object(b.b)()},j=b.c,d=n(10),h={moves:0,currentNumber:0,enteredNumber:0,gameData:{cows:0,bulls:0},incorrectNumbers:[],hints:[],history:[]},f=Object(d.b)({name:"game",initialState:h,reducers:{incrementMoves:function(e){e.moves+=1},setEnteredNumber:function(e,t){e.enteredNumber=+t.payload},setGameData:function(e,t){e.gameData=t.payload},setIncorrectNumbers:function(e,t){e.incorrectNumbers=t.payload},setCurrentNumber:function(e,t){e.currentNumber=t.payload},addToHistory:function(e,t){e.history.push(t.payload)},clearHistory:function(e){e.history=[]},setHints:function(e,t){e.hints=t.payload},clearHints:function(e){e.hints=[]},annulateState:function(e){e.moves=0,e.currentNumber=0,e.enteredNumber=0,e.gameData={cows:0,bulls:0},e.hints=[],e.history=[],e.incorrectNumbers=[]}}}),p=f.actions,x=p.incrementMoves,v=p.addToHistory,O=(p.clearHints,p.clearHistory,p.setGameData),_=(p.setHints,p.setIncorrectNumbers),N=p.setEnteredNumber,g=p.annulateState,w=p.setCurrentNumber,y=f.reducer,H=i.a.mark(T),k="SHOW_ALERT",C="HIDE_ALERT";function T(e){var t,n,r,s;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=0;case 1:if(!(t<=4)){a.next=12;break}return 0===(n=Math.floor(Math.random()*e.length))&&0===t&&n++,r=e[n],e.splice(n,1),s=Math.pow(10,t),a.next=9,r*s;case 9:t++,a.next=1;break;case 12:case"end":return a.stop()}}),H)}!function(e){e.warning="yellow",e.success="green",e.danger="red"}(r||(r={}));var D,S=function(){for(var e=[0,1,2,3,4,5,6,7,8,9],t={number:0,incorrectNumbers:[]},n=T(e),r=0;r<4;r++)t.number+=n.next().value;return t.incorrectNumbers=e,t},L=function(){var e=m();e(g());var t=S(),n=t.number,r=t.incorrectNumbers;e(w(n)),e(_(r))},E=function(e){return[4===e.toString().length,(t=e,!/([0-9]).*?\1/.test(t.toString()))];var t},I=function(e,t){for(var n={cows:0,bulls:0},r=e.toString().split(""),s=t.toString().split(""),a=0;a<4;a++)r[a]===s[a]&&(n.bulls+=1),s.includes(r[a])&&(n.cows+=1);return n},M=n(17),A=n.n(M),R=n(1),G=function(){var e=Object(s.useContext)(l),t=m();return Object(R.jsx)("button",{className:A.a.restart,onClick:function(){t(g());var n=S(),s=n.number,a=n.incorrectNumbers;t(w(s)),t(_(a)),e.show("New game started",r.success)},children:"Restart game"})},W=n(7),B=n.n(W),U=function(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(s.useContext)(l),b=j((function(e){return e.game})),d=b.currentNumber,h=b.enteredNumber,f=m(),p=function(){var e=Object(o.a)(i.a.mark((function e(t){var s,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n){e.next=2;break}return e.abrupt("return");case 2:if(t.preventDefault(),c.hide(),f(N(t.currentTarget.nodeValue)),a(""),s=E(h),console.log(s),!s[0]||!s[1]){e.next=22;break}if(f(x()),h!==d){e.next=14;break}Promise.resolve().then((function(){return c.show("WOU WIN!!!",r.success)})).then((function(){setTimeout((function(){return L()}),2e3)})),e.next=20;break;case 14:return o=I(d,h),u={number:h,data:o},e.next=18,f(O(o));case 18:return e.next=20,f(v(u));case 20:e.next=27;break;case 22:l="",s[0]||(l+="non 4-digit number "),s[0]||s[1]||(l+="and "),s[1]||(l+="number has repeated digits"),c.show(l,r.warning);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsx)("section",{className:B.a.container,children:Object(R.jsxs)("form",{className:B.a.form,action:"#",onSubmit:function(e){return p(e)},children:[Object(R.jsx)("input",{className:B.a.input,type:"text",onChange:function(e){return function(e){a(e.target.value),f(N(e.target.value))}(e)},value:n,placeholder:"####",maxLength:4}),Object(R.jsx)("button",{className:B.a.submit,type:"submit",children:"Check number"}),Object(R.jsx)(G,{})]})})},J=n(11),z=n.n(J),F=function(e){var t=e.moves;return Object(R.jsx)("div",{className:z.a.moves,children:Object(R.jsxs)("h3",{className:z.a.movesTitle,children:["Your moves: ",Object(R.jsx)("span",{className:z.a.movesText,children:t})]})})},Y=n(18),K=n.n(Y),P=function(e){var t=e.cows,n=e.bulls;return Object(R.jsxs)("section",{className:K.a.gameData,children:[Object(R.jsxs)("p",{children:["\ud83d\udc04: ",t]}),Object(R.jsxs)("p",{children:["\ud83d\udc02: ",n]})]})},q=n(3),Q=n.n(q),V=function(e){var t=e.number,n=e.data;return Object(R.jsxs)("li",{className:Q.a.item,children:[Object(R.jsx)("strong",{className:Q.a.number,children:t}),Object(R.jsxs)("div",{className:Q.a.data,children:[Object(R.jsxs)("p",{children:["\ud83d\udc04: ",n.cows," \xa0"]}),Object(R.jsxs)("p",{children:["\ud83d\udc02: ",n.bulls]})]})]},"".concat(t,"-").concat(n.cows,"-").concat(n.bulls))},X=function(){var e=j((function(e){return e.game})).history.map((function(e){var t=e.number,n=e.data;return Object(R.jsx)(V,{number:t,data:n})})).reverse();return Object(R.jsxs)("section",{className:Q.a.history,children:[Object(R.jsx)("h2",{className:Q.a.title,children:"History"}),Object(R.jsx)("ul",{className:Q.a.historyList,children:e.length?e:Object(R.jsx)("span",{children:"You have nor entered the number"})})]})},Z=n(19),$=n.n(Z),ee=function(){return Object(R.jsx)("h1",{className:$.a.title,children:"Cow-Bull Game"})},te=function(){var e=Object(s.useContext)(l),t=e.warning,n=e.hide,r=t.type,a=t.text;return t.visible?Object(R.jsxs)("div",{className:"alert-".concat(r),role:"alert",children:[Object(R.jsx)("p",{className:"font-bold",children:"WARNING!!"}),"\xa0",a,Object(R.jsx)("button",{onClick:n,className:"close","aria-label":"Close",children:Object(R.jsx)("span",{"aria-hidden":"true",children:Object(R.jsxs)("svg",{role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:[Object(R.jsx)("title",{children:"Close"}),Object(R.jsx)("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})]})})})]}):null},ne=n(14),re=n.n(ne),se=function(){var e=j((function(e){return e})).game,t=e.moves,n=e.gameData,r=n.cows,a=n.bulls,c=m();return Object(s.useEffect)((function(){var e=S(),t=e.number,n=e.incorrectNumbers;c(w(t)),c(_(n))}),[]),Object(R.jsx)("div",{className:re.a.wrapper,children:Object(R.jsxs)("div",{className:re.a.container,children:[Object(R.jsx)(ee,{}),Object(R.jsx)(te,{}),Object(R.jsx)(F,{moves:t}),Object(R.jsx)(U,{}),Object(R.jsx)(P,{cows:r,bulls:a}),Object(R.jsx)(X,{})]})})},ae=n(5),ce=n(2),ie=(D={},Object(ae.a)(D,k,(function(e,t){var n=t.payload;return Object(ce.a)(Object(ce.a)({},n),{},{visible:!0})})),Object(ae.a)(D,C,(function(e){return Object(ce.a)(Object(ce.a)({},e),{},{visible:!1})})),Object(ae.a)(D,"DEFAULT",(function(e){return e})),D),oe=function(e,t){return(ie[t.type]||ie.DEFAULT)(e,t)},ue=function(e){var t=Object(s.useReducer)(oe,{visible:!1}),n=Object(u.a)(t,2),r=n[0],a=n[1];return Object(R.jsx)(l.Provider,{value:{show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";a({type:k,payload:{text:e,type:t}})},hide:function(){return a({type:C})},warning:r},children:e.children})},le=Object(d.a)({reducer:{game:y},middleware:[]});n(32);a.render(Object(R.jsx)(b.a,{store:le,children:Object(R.jsx)(ue,{children:Object(R.jsx)(se,{})})}),document.getElementById("root"))},7:function(e,t,n){e.exports={container:"Input_container__2qJpQ",form:"Input_form__4Ki_f",input:"Input_input__2LtWo",submit:"Input_submit__1-wA7"}}},[[33,1,2]]]);
//# sourceMappingURL=main.716c1af9.chunk.js.map