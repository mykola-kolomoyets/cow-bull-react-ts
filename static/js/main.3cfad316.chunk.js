(this["webpackJsonpcow-bull-ts"]=this["webpackJsonpcow-bull-ts"]||[]).push([[0],{27:function(e,t,r){},28:function(e,t,r){"use strict";r.r(t);var n,c=r(0),s=r(6),a=r(3),o=r.n(a),u=r(11),l=r(7),i=Object(c.createContext)({}),b=r(5),d=function(){return Object(b.b)()},m=b.c,x=r(8),j={moves:0,currentNumber:0,enteredNumber:0,gameData:{cows:0,bulls:0},incorrectNumbers:[],hints:[],history:[]},h=Object(x.b)({name:"game",initialState:j,reducers:{incrementMoves:function(e){e.moves+=1},setEnteredNumber:function(e,t){e.enteredNumber=+t.payload},setGameData:function(e,t){e.gameData=t.payload},setIncorrectNumbers:function(e,t){e.incorrectNumbers=t.payload},setCurrentNumber:function(e,t){e.currentNumber=t.payload},addToHistory:function(e,t){e.history.push(t.payload)},clearHistory:function(e){e.history=[]},setHints:function(e,t){e.hints=t.payload},clearHints:function(e){e.hints=[]},annulateState:function(e){e.moves=0,e.currentNumber=0,e.enteredNumber=0,e.gameData={cows:0,bulls:0},e.hints=[],e.history=[],e.incorrectNumbers=[]}}}),f=h.actions,p=f.incrementMoves,O=f.addToHistory,v=(f.clearHints,f.clearHistory,f.setGameData),N=(f.setHints,f.setIncorrectNumbers),g=f.setEnteredNumber,w=f.annulateState,y=f.setCurrentNumber,k=h.reducer,C=o.a.mark(S),H="SHOW_ALERT",D="HIDE_ALERT";function S(e){var t,r,n,c;return o.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=0;case 1:if(!(t<=4)){s.next=12;break}return 0===(r=Math.floor(Math.random()*e.length))&&0===t&&r++,n=e[r],e.splice(r,1),c=Math.pow(10,t),s.next=9,n*c;case 9:t++,s.next=1;break;case 12:case"end":return s.stop()}}),C)}!function(e){e.warning="yellow",e.success="green",e.danger="red"}(n||(n={}));var E,T=function(){for(var e=[0,1,2,3,4,5,6,7,8,9],t={number:0,incorrectNumbers:[]},r=S(e),n=0;n<4;n++)t.number+=r.next().value;return t.incorrectNumbers=e,t},L=function(){var e=d();e(w());var t=T(),r=t.number,n=t.incorrectNumbers;e(y(r)),e(N(n))},I=function(e){return[4===e.toString().length,(t=e,!/([0-9]).*?\1/.test(t.toString()))];var t},M=function(e,t){for(var r={cows:0,bulls:0},n=e.toString().split(""),c=t.toString().split(""),s=0;s<4;s++)n[s]===c[s]&&(r.bulls+=1),c.includes(n[s])&&(r.cows+=1);return r},A=r(1),G=function(){var e=Object(c.useContext)(i),t=d();return Object(A.jsx)("button",{className:"flex-shrink-0 border-transparent border-4 text-blue-500 hover:text-blue-900 text-lg py-1 px-3 rounded",onClick:function(){t(w());var r=T(),c=r.number,s=r.incorrectNumbers;t(y(c)),t(N(s)),e.show("New game started",n.success)},children:"RestartGame"})},R=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),r=t[0],s=t[1],a=Object(c.useContext)(i),b=m((function(e){return e.game})),x=b.currentNumber,j=b.enteredNumber,h=d(),f=function(){var e=Object(u.a)(o.a.mark((function e(t){var c,u,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r){e.next=2;break}return e.abrupt("return");case 2:if(t.preventDefault(),a.hide(),h(g(t.currentTarget.nodeValue)),s(""),c=I(j),console.log(c),!c[0]||!c[1]){e.next=22;break}if(h(p()),j!==x){e.next=14;break}Promise.resolve().then((function(){return a.show("WOU WIN!!!",n.success)})).then((function(){setTimeout((function(){return L()}),2e3)})),e.next=20;break;case 14:return u=M(x,j),l={number:j,data:u},e.next=18,h(v(u));case 18:return e.next=20,h(O(l));case 20:e.next=27;break;case 22:i="",c[0]||(i+="non 4-digit number "),c[0]||c[1]||(i+="and "),c[1]||(i+="number has repeated digits"),a.show(i,n.warning);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsx)("section",{children:Object(A.jsx)("form",{className:"w-full max-w-sm",action:"#",onSubmit:function(e){return f(e)},children:Object(A.jsxs)("div",{className:"flex items-center border-b border-blue-500 py-2",children:[Object(A.jsx)("input",{className:"appearance-none bg-transparent border-none w-full text-xl text-blue-700 mr-3 py-1 px-2 leading-tight focus:outline-none",type:"text",onChange:function(e){return function(e){s(e.target.value),h(g(e.target.value))}(e)},value:r,placeholder:"####",maxLength:4}),Object(A.jsx)("button",{className:" flex-shrink-0 bg-blue-500 hover:bg-blue-700 px-2 py-2 text-white font-bold border border-blue-700 rounded",type:"submit",children:"Check number"}),Object(A.jsx)(G,{})]})})})},B=function(e){var t=e.moves;return Object(A.jsx)("div",{className:"w-full px-2 py-2 text-xl mb-3",children:Object(A.jsxs)("h3",{className:"flex-items-center text-center",children:["Your moves: ",Object(A.jsx)("span",{className:"text-2xl",children:t})," "]})})},W=function(e){var t=e.cows,r=e.bulls;return Object(A.jsxs)("section",{className:"w-36 flex mx-auto",children:[Object(A.jsxs)("p",{className:"mx-auto text-md mx-3 my-2",children:["Cows: ",t]}),Object(A.jsxs)("p",{className:" mx-auto text-md mx-3 my-2",children:["Bulls: ",r]})]})},U=function(e){var t=e.number,r=e.data;return Object(A.jsxs)("li",{className:"flex-column px-2 py-1 mt-2 border-l-2 border-blue-300",children:[Object(A.jsx)("strong",{children:t}),Object(A.jsxs)("div",{className:"flex",children:[Object(A.jsxs)("p",{children:["cows: ",r.cows," \xa0"]}),Object(A.jsxs)("p",{children:["bulls: ",r.bulls]})]})]},"".concat(t,"-").concat(r.cows,"-").concat(r.bulls))},F=function(){var e=m((function(e){return e.game})).history.map((function(e){var t=e.number,r=e.data;return Object(A.jsx)(U,{number:t,data:r})}));return Object(A.jsxs)("section",{className:"mt-3 border border-blue-100 rounded px-3 py-3",children:[Object(A.jsx)("h2",{className:"text-2xl border-b border-blue-100 pb-3",children:"History"}),Object(A.jsx)("ul",{className:"",children:e.length?e:Object(A.jsx)("span",{className:"text-sm",children:"You have nor entered the number"})})]})},J=function(){return Object(A.jsx)("h1",{className:"text-4xl text-bold text-center mb-3",children:"Cow-Bull Game"})},P=function(){var e=Object(c.useContext)(i),t=e.warning,r=e.hide,n=t.type,s=t.text;return t.visible?Object(A.jsxs)("div",{className:"bg-".concat(n,"-100 border-l-4 border-").concat(n,"-500 text-").concat(n,"-700 p-4 relative rounded"),role:"alert",children:[Object(A.jsx)("p",{className:"font-bold",children:"WARNING!!"}),"\xa0",s,Object(A.jsx)("button",{onClick:r,className:"close","aria-label":"Close",children:Object(A.jsx)("span",{"aria-hidden":"true",className:"absolute top-3 bottom-0 right-0 px-4 py-3",children:Object(A.jsxs)("svg",{className:"fill-current h-6 w-6 text-".concat(n,"-500"),role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:[Object(A.jsx)("title",{children:"Close"}),Object(A.jsx)("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})]})})})]}):null},Y=function(){var e=m((function(e){return e})).game,t=e.moves,r=e.gameData,n=r.cows,s=r.bulls,a=d();return Object(c.useEffect)((function(){var e=T(),t=e.number,r=e.incorrectNumbers;a(y(t)),a(N(r))}),[]),Object(A.jsx)("div",{className:"sm:container sm:mx-auto my-auto mx-4-auto p-10 border-4 border-blue-500 box-border relative top-9 rounded",children:Object(A.jsxs)("div",{className:"w-96 flex-column mx-auto",children:[Object(A.jsx)(J,{}),Object(A.jsx)(P,{}),Object(A.jsx)(B,{moves:t}),Object(A.jsx)(R,{}),Object(A.jsx)(W,{cows:n,bulls:s}),Object(A.jsx)(F,{})]})})},_=r(4),z=r(2),V=(E={},Object(_.a)(E,H,(function(e,t){var r=t.payload;return Object(z.a)(Object(z.a)({},r),{},{visible:!0})})),Object(_.a)(E,D,(function(e){return Object(z.a)(Object(z.a)({},e),{},{visible:!1})})),Object(_.a)(E,"DEFAULT",(function(e){return e})),E),q=function(e,t){return(V[t.type]||V.DEFAULT)(e,t)},K=function(e){var t=Object(c.useReducer)(q,{visible:!1}),r=Object(l.a)(t,2),n=r[0],s=r[1];return Object(A.jsx)(i.Provider,{value:{show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";s({type:H,payload:{text:e,type:t}})},hide:function(){return s({type:D})},warning:n},children:e.children})},Q=r(13),X=r.n(Q),Z=Object(x.a)({reducer:{game:k},middleware:[X.a]});r(27);s.render(Object(A.jsx)(b.a,{store:Z,children:Object(A.jsx)(K,{children:Object(A.jsx)(Y,{})})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.3cfad316.chunk.js.map